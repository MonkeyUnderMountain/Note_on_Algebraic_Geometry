\section{Introduction to Moduli Problems}

    Let \(C\) be a smooth projective curve of genus \(g\) over an algebraically closed field \(\kkk\) of characteristic \(0\).

    We are interested in the moduli space of vector bundles on \(C\).

\subsection{Moduli functors}

    Let \(S\) be a noetherian scheme and \(T\) is a scheme of finite type over \(S\).
    Recall the Yoneda lemma: 
    there is a full and faithful functor 
    \[ h : (\Sch_S)^{\op} \to \Fun((\Sch_S)^{\op}, \Set), \quad T \mapsto h_T(S) \coloneqq \Hom_{\Sch_S}(T, S). \]
    
    A functor \(F : (\Sch_S)^{\op} \to \Set\) is \emph{representable} if there exists a scheme \(M\) over \(S\) such that \(F \cong h_M\).
    We say that \(M\) is \emph{the fine moduli space} of \(F\).

    \begin{remark}\label{rmk:fine_moduli_space}
        If \(F\) is representable by \(M\), then there is a universal object \(\calU \in F(M)\) given by \(\id_M \in h_M(M)\) satisfying the following universal property: 
        for any \(T \in \Sch_S\) and any \(\xi \in F(T)\), there exists a unique morphism \(f : T \to M\) such that \(F(f)(\calU) = \xi\).
    \end{remark}

    The most famous example of representable functor is the Quot functor.
    Let \(S\) be a noetherian scheme, \(\pi:X \to S\) a projective morphism, \(\calL\) a relatively ample line bundle on \(X\), \(\calF\) a coherent sheaf on \(X\), and \(P \in \bbQ[t]\) a polynomial.
    We define a functor
    \begin{align*}
        \calQuot_{\calF/X/S}^{P,\calL} : & (\Sch_S)^{\op} \to \Set \\
        & T \mapsto 
        \left\{ 
            \pi^*_T \calF \surjmap \calQ 
        \;\middle|\;
            \calQ \text{ is flat over } T, \forall t \in T, \calQ_t \text{ has Hilbert polynomial } P
        \right\}/ \sim,
    \end{align*}
    where \(\pi^*_T \calF \surjmap \calQ\) and \(\pi^*_T \calF \surjmap \calQ'\) are equivalent if \(\Ker(\pi^*_T \calF \surjmap \calQ) = \Ker(\pi^*_T \calF \surjmap \calQ')\).

    By Grothendieck, \(\calQuot_{\calF/X/S}^{P,\calL}\) is representable by a projective \(S\)-scheme \(\Quot_{\calF/X/S}^{P,\calL}\).
    \Yang{Reference...}

    If we take \(S = \Spec \kkk\), \(X\) a projective variety and \(\calF = \calO_X\).
    Then the Quot functor \(\calQuot_{\calO_X/X/\kkk}^{P,\calL}\) becomes the Hilbert functor \(\calHilb_{X/\kkk}^{P,\calL}\), which is representable by a projective \(\kkk\)-scheme called the \emph{Hilbert scheme} \(\Hilb_X^{P,\calL}\).

\subsection{Moduli functor of vector bundles}

    Consider the functor 
    \begin{align*}
        \tilde{\calM}_{r,d} : & (\Sch_S)^{\op} \to \Set \\
        & T \mapsto \left\{ 
            \calE 
        \;\middle|\;
            \calE \text{ is a vector bundle on } X \times T \text{ of rank } r, \forall t \in T, \deg(\calE_t) = d
         \right\}/ \sim,
    \end{align*}
    where \(\calE \sim \calE'\) if there exists a line bundle \(\calL\) on \(T\) such that \(\calE' \cong \calE \otimes \pi_T^* \calL\), where \(\pi_T : X \times T \to T\) is the projection.

    Unfortunately, \(\tilde{\calM}_{r,d}\) is not representable.
    There are two main reasons:
    \begin{itemize}
        \item unboundedness and 
        \item jumping phenomenon.
    \end{itemize}

    \begin{definition}\label{def:bounded_family}
        A family of vector bundles on a variety \(X\) is \emph{bounded} 
        if there exists a scheme \(S\) of finite type over \(\kkk\) and a vector bundle \(\calE\) on \(X \times S\) 
        such that every vector bundle in the family is isomorphic to \(\calE_s\) for some \(s \in S\).
    \end{definition}

    If \(\tilde{\calM}_{r,d}\) is representable by a scheme \(M\) of finite type over \(\kkk\), then the family of vector bundles parametrized by \(M\) is bounded.
    This is impossible since if so, \(\{h^0(X,\calE) \mid \calE \in \tilde{\calM}_{r,d}(\kkk)\}\) is bounded by semicontinuity theorem, which is not true.
    For example, consider the family \(\calE_n = \calO_X(nP) \oplus \calO_X(-nP) \in \tilde{\calM}_{2,0}(\kkk)\) for \(n \geq 0\), where \(P \in X(\kkk)\) is a fixed point.
    By Riemann-Roch theorem, we have \(h^0(X,\calE_n) = n + 1-g\) for \(n\) sufficiently large.


    Let us see a jumping phenomenon example due to Rees.
    Let \(\calE\) be a vector bundle on \(X\) of rank \(r\) and degree \(d\) with a filtration
    \[F: 0 = \calE_0 \subset \calE_1 \subset \cdots \subset \calE_r = \calE. \]
    On \(X \times \bbA^1\), we can construct a vector bundle \(\calF\) by ``deforming'' \(\calE\) to \(\bigoplus_{i=1}^r \calE_i/\calE_{i-1}\) as follows:
    let \(t\) be the coordinate of \(\bbA^1\), 
    and define \(\calF\) to be 
    \[ \bigoplus_{i=1}^r \pi_X^* \calE_i \cdot e_i \big/ \calK, \]
    where \(\calK\) is the subsheaf generated by \(\{s (e_{i-1} -te_i) \mid s \in \pi_X^* \calE_{i-1} \subset \pi_X^* \calE_i, 1 \leq i \leq r\}\) and \(e_1, \ldots, e_r\) are formal symbols.
    Suppose that \(\calE_i/\calE_{i-1}\) are vector bundles for all \(1 \leq i \leq r\).
    Then by computing locally, we can see that \(\calF\) is a vector bundle of rank \(r\) on \(X \times \bbA^1\).
    We have 
    \[ \calF_t \cong \begin{cases}
        \calE, & t \neq 0, \\
        \bigoplus_{i=1}^r \calE_i/\calE_{i-1}, & t = 0.
    \end{cases} \]
    We see that all \(\calF_t\) is of rank \(r\) and degree \(d\), but it jumps from \(\calE\) to \(\bigoplus_{i=1}^r \calE_i/\calE_{i-1}\) at \(t = 0\).
    This is called the \emph{jumping phenomenon}.

    \begin{example}\label{eg:Rees_construction_by_Euler_sequence_on_P1}
        For a concrete example, let \(X = \bbP^1\), we have an exact sequence
        \[ 0 \to \calO(-2) \to \calO(-1) \oplus \calO(-1) \to \calO \to 0 \]
        by \cref{prop:Euler_sequence_on_projective_spaces}.
        Fix the standard coordinate \(\bbP^1 = \Proj \kkk[X_0,X_1]\) and let \(e_0 = (1,0)\), \(e_1 = (0,1)\) be the standard basis of \(\calE = \calO(-1) \oplus \calO(-1)\).
        On the open subset \(U_i = \{X_i \neq 0\}\), fix a trivialization \(\calO(-1) \cong \calO_{U_i} \cdot \frac{1}{X_i}\).
        Recall that \(\calO(-2) \subset \calE\) is generated by \((X_1 e_0 - X_0 e_1)/X_i^2\) on \(U_i\) for \(i = 0,1\) and \(\calE \to \calO\) is given by \(e_0 \mapsto X_0\), \(e_1 \mapsto X_1\).

        Consider the filtration \(0 \subset \calO(-2) \subset \calE\).
        Then on \(U_i \times \bbA^1\), \(\calF\) is given by the quotient
        \[ \left(\calO \cdot \frac{e_0X_1 - X_0 e_1}{X_i^2} f_1 \oplus \calO \cdot \frac{e_1}{X_i} f_2 \oplus \calO \cdot \frac{e_2}{X_i} f_2 \right) \bigg/ \calO \cdot \frac{X_1 e_0 - X_0 e_1}{X_i^2} (t f_1 - f_2), \]
        where \(f_1, f_2\) are formal symbols.
        When \(t\neq 0\), the quotient makes \(f_1\) and \(f_2\) identified up to a scalar, thus \(\calF_t \cong \calE\).
        When \(t = 0\), the quotient kills \(\frac{X_1 e_0 - X_0 e_1}{X_i^2} f_2\), thus \(\calF_0 \cong \calO(-2)f_1 \oplus \calE f_2/\calO(-2)f_2 \cong \calO(-2) \oplus \calO\).
    \end{example}

    If \(\tilde{\calM}_{r,d}\) is representable by a scheme \(M\), then the family of vector bundles parametrized by \(M\) does not have jumping phenomenon.
    Indeed, if \(\calF\) is an vector bundle on \(X \times \bbA^1\) such that \(\calF_t \cong \calE\) for \(t \neq 0\), 
    then by the universal property of \(M\), there exists a unique morphism \(f : \bbA^1 \to M\) such that \(\calF \cong (\id_X \times f)^* \calU\), 
    where \(\calU\) is the universal vector bundle on \(X \times M\).
    Since \(f\) is constant on the open subset \(\bbA^1 \setminus \{0\}\), it is constant on \(\bbA^1\).
    Thus, \(\calF_0 \cong \calE\).

    To fix the above problems, we need to 
    \begin{itemize}
        \item restrict to a smaller family of vector bundles,
        \item kill jumping phenomenon, and
        \item weaken the notion of representability.
    \end{itemize}

% \subsection{Coarse moduli space}

    % \Yang{To be continued...}

    \begin{definition}\label{def:corepresents_functor}
        Let \(F: (\Sch_S)^{\op} \to \Set\) be a functor, \(M\) a scheme over \(S\), and \(\eta : F \to h_M\) a natural transformation.
        We say that \((M, \eta)\) \emph{corepresents} \(F\) 
        if for any scheme \(N\) over \(S\) and any natural transformation \(\eta' : F \to h_N\), 
        there exists a unique morphism \(f : M \to N\) such that the following diagram commutes:
        \[ \begin{tikzcd}
            F \arrow[r, "\eta"] \arrow[dr, "\eta'"'] & h_M \arrow[d, "h_f"] \\
             & h_N.
        \end{tikzcd} \]
    \end{definition}

    \begin{definition}\label{def:coarse_moduli_space}
        A scheme \(M\) over \(S\) is called the \emph{coarse moduli space} of \(F\) if 
        \begin{enumerate}
            \item there exists a natural transformation \(\eta : F \to h_M\) such that \((M, \eta)\) corepresents \(F\);
            \item \(\eta_\kkk : F(\kkk) \to M(\kkk)\) is a bijection.
        \end{enumerate}
    \end{definition}

    \Yang{To be continued...}

\subsection{Semistable vector bundles}

    \begin{definition}\label{def:slope_of_vector_bundles_over_curves}
        Let \(C\) be a smooth projective curve over \(\kkk\).
        For a vector bundle \(\calE\) of rank \(r\) and degree \(d\) on \(C\), we define its slope to be \(\mu(\calE) \coloneqq d/r\).
    \end{definition}

    \begin{proposition}\label{lem:slope_of_exact_sequence}
        Let \(0 \to \calE_1 \to \calE_2 \to \calE_3 \to 0\) be an exact sequence of non-zero vector bundles on \(C\).
        Then \(\mu(\calE_2) \geq \mu(\calE_1)\) (resp. \(\mu(\calE_2) > \mu(\calE_1)\)) if and only if \(\mu(\calE_2) \leq \mu(\calE_3)\) (resp. \(\mu(\calE_2) < \mu(\calE_3)\)).
    \end{proposition}
    \begin{proof}
        We have 
        \[ \mu(\calE_2) = \frac{\deg \calE_2}{\rank \calE_2} = \frac{\deg \calE_1 + \deg \calE_3}{\rank \calE_1 + \rank \calE_3}. \]
        Note that for any \(a,b,c,d \in \bbR_{>0}\), we have 
        \[\frac{a+c}{b+d} \geq \frac{a}{b} \iff bc \geq ad \iff \frac{a+c}{b+d} \leq \frac{c}{d}. \]
        The strict inequality case is similar.
        Then the proposition follows.
    \end{proof}

    \begin{definition}\label{def:stable_and_semistable_vector_bundles_over_curves}
        Let \(C\) be a smooth projective curve over \(\kkk\) and \(\calE\) a vector bundle on \(C\).
        We say that \(\calE\) is \emph{stable} (resp. \emph{semistable}) if for any proper sub-bundle \(\calF \subset \calE\), we have \(\mu(\calF) < \mu(\calE)\) (resp. \(\mu(\calF) \leq \mu(\calE)\)).
    \end{definition}

    \begin{proposition}\label{prop:homomorphism_between_semistable_and_stable_bundles}
        Let \(\calE\) and \(\calF\) be vector bundles on \(C\).
        Suppose that they are semistable and \(\mu(\calE) > \mu(\calF)\).
        Then any homomorphism \(\varphi : \calE \to \calF\) is zero.

        Suppose that they are stable and \(\mu(\calE) = \mu(\calF)\).
        Then any non-zero homomorphism \(\varphi : \calE \to \calF\) is an isomorphism.
    \end{proposition}
    \begin{proof}
        Let \(\varphi : \calE \to \calF\) be a non-zero homomorphism of vector bundles on \(C\).
        We have an exact sequence
        \[ 0 \to \Ker \varphi \to \calE \to \Image \varphi \to 0. \]
        Since \(\calF\) is vector bundle, hence torsion-free, \(\Image \varphi\) is also torsion-free, thus a vector bundle.

        If \(\calE\) and \(\calF\) are semistable with \(\mu(\calE) > \mu(\calF)\), 
        clearly \(\Ker \varphi \neq 0\), then by \cref{lem:slope_of_exact_sequence}, we have
        \[ \mu(\calE) \leq \mu(\Image \varphi) \leq \mu(\calF). \]
        This is a contradiction, thus \(\varphi = 0\).

        Suppose that \(\calE\) and \(\calF\) are stable with \(\mu(\calE) = \mu(\calF)\).
        If \(\Ker \varphi \neq 0\), then by \cref{lem:slope_of_exact_sequence}, we have
        \[ \mu(\calE) < \mu(\Image \varphi) \leq \mu(\calF). \]
        This is a contradiction, thus \(\varphi\) is injective.
        Since \(\calF\) is stable and \(\Image \varphi \subset \calF\) has the same slope as \(\calF\), we have \(\Image \varphi = \calF\).
    \end{proof}

    \begin{corollary}\label{cor:stable_vector_bundles_are_simple}
        A stable vector bundle is simple as a coherent sheaf, i.e., \(\End(\calE) \cong \kkk\).
    \end{corollary}
    \begin{proof}
        Let \(\varphi \in \End(\calE)\) be a non-zero endomorphism.
        Then there exists \(P \in C(\kkk)\) such that \(\varphi_P : \calE_P \to \calE_P\) is non-zero.
        Let \(a \in \kkk\) be an eigenvalue of \(\varphi_P\) and consider the endomorphism \(\varphi - a \cdot \id_\calE\).
        Then \((\varphi - a \cdot \id_\calE)_P : \calE_P \to \calE_P\) is not an isomorphism, so is \(\varphi - a \cdot \id_\calE\).
        By \cref{prop:homomorphism_between_semistable_and_stable_bundles}, \(\varphi - a \cdot \id_\calE = 0\), thus \(\varphi = a \cdot \id_\calE\).
    \end{proof}

    \begin{lemma}\label{lem:vanishing_and_global_generation_of_semistable_vector_bundles}
        Let \(\calE\) be a semistable vector bundle on \(X\).
        \begin{enumerate}
            \item if \(\mu(\calE) > 2g-2\), then \(H^1(X,\calE) = 0\);
            \item if \(\mu(\calE) > 2g-1\), then \(\calE\) is globally generated.
        \end{enumerate}
    \end{lemma}
    \begin{proof}
        \Yang{To be continued...}
    \end{proof}

    Let \(S_{r,d}\) be set of isomorphism classes of semistable vector bundles on \(X\) of rank \(r\) and degree \(d\).

    \begin{proposition}\label{prop:semistable_vector_bundles_are_bounded}
        The family \(S_{r,d}\) is bounded.
    \end{proposition}
    \begin{proof}
        \Yang{To be continued...}
    \end{proof}


    \begin{definition}[Jordan-H\"older filtration]\label{def:Jordan-Holder_filtration}
        Let \(\calE\) be a semistable vector bundle on \(C\).
        A \emph{Jordan-H\"older filtration} of \(\calE\) is a filtration 
        \[ F : 0 = \calE_0 \subset \calE_1 \subset \cdots \subset \calE_n = \calE \]
        such that \(\calE_i/\calE_{i-1}\) are stable with \(\mu(\calE_i/\calE_{i-1}) = \mu(\calE)\) for all \(1 \leq i \leq n\).
    \end{definition}

    \begin{proposition}\label{prop:existence_and_uniqueness_of_Jordan-Holder_filtration}
        Any semistable vector bundle on \(C\) admits a Jordan-H\"older filtration.
        Moreover, the associated graded object 
        \[ \gr(\calE) \coloneqq \bigoplus_{i=1}^n \calE_i/\calE_{i-1} \]
        is independent of the choice of Jordan-H\"older filtration up to isomorphism.
    \end{proposition}
    \begin{proof}
        \Yang{To be continued...}
    \end{proof}

    \begin{definition}[S-equivalence]\label{def:S-equivalence}
        Two semistable vector bundles \(\calE\) and \(\calF\) of the same rank and degree on \(C\) are called \emph{S-equivalent} 
        if their associated graded objects \(\gr(\calE)\) and \(\gr(\calF)\) (from their Jordan-H\"older filtrations) are isomorphic.
    \end{definition}


    \begin{definition}\label{def:coarse_moduli_functor_of_vector_bundles}
        We define a functor 
        \begin{align*}
            \calM_{r,d}^{ss} : & (\Sch_\kkk)^{\op} \to \Set \\
            & T \mapsto \left\{ 
                \calE 
            \;\middle|\;
                \calE \text{ is a family of semistable vector bundles on } X \text{ of rank } r, \forall t \in T, \deg(\calE_t) = d
            \right\}/ \sim,
        \end{align*}
        where \(\calE \sim \calE'\) if for any \(t \in T\), the vector bundles \(\calE_t\) and \(\calE'_t\) are S-equivalent or \Yang{...}.
        \Yang{To be continued...}
    \end{definition}