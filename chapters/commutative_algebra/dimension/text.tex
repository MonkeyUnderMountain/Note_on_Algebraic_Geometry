\section{Dimension and Depth}

There are three numbers measuring the ``size'' of a local ring $(A,\frakm)$:
    \begin{itemize}
        \item $\dim A$: the Krull dimension of $A$.
        \item $\depth A$: the depth of $A$.
        \item $\dim_{\rkk(\frakm)} T_{A,\frakm}$: the dimension of Zariski tangent space $T_{A,\frakm} := (\frakm/\frakm^2)^\lor$ as a ${\rkk(\frakm)}$-vector space.
    \end{itemize}

Somehow the Krull dimension is ``homological'' and the depth is ``cohomological''.

\begin{definition}\label{def: height of ideals and Krull dimension}
    Let $A$ be a noetherian ring.
    The \textit{height of a prime ideal} $\frakp$ in $A$ is defined as the maximum length of chains of prime ideals contained in $\frakp$, that is, 
    \[ \idealht(\frakp) := \sup\{ n \mid \exists \text{ a chain of prime ideals } \frakp_0 \subsetneq \frakp_1 \subsetneq \cdots \subsetneq \frakp_n = \frakp\}. \] 
    The \textit{Krull dimension} of $A$ is defined as 
    \[ \dim A := \max_{\frakp \in \Spec A}\idealht(\frakp). \]
\end{definition}

\begin{example}
    Let \(A\) be a PID.
    For every two non-zero prime ideals \(\frakp_1\) and \(\frakp_2\), 
    if \(\frakp_1 = t_1A \subset \frakp_2 = t_2A\), then \(t_2 \mid t_1\) and hence \(\frakp_1 = \frakp_2\).
    It follows that \(\dim A = 1\).
    Consequently, the ring of integers \(\bbz\) and the polynomial ring \(\kk[T]\) in one variable over a field have Krull dimension \(1\).
\end{example}

\begin{definition}\label{def: regular sequence}
    Let $A$ be a noetherian ring, $I \subset A$ an ideal and $M$ a finitely generated $A$-module.
    A sequence $t_1,\cdots,t_n\in I$ is called an \textit{$M$-regular sequence in $I$} if $t_i$ is not a zero divisor on $M/(t_1,\cdots,t_{i-1})M$ for all $i$. 
\end{definition}

\begin{example}
    Let $A = \kk[x,y]/(x^2,xy)$ and $I = (x,y)$.
    Then $\depth_I A = 0$.
\end{example}

\begin{definition}\label{def: Zariski's tangent space}
    Let \(A\) be a noetherian ring.
    For every $\frakp \in \Spec A$, \(\frakp/\frakp^2\) is a vector space over \(\rkk(\frakp)\).
    The \emph{Zariski's tangent space} $T_{A,\frakp}$ of \(A\) at \(\frakp\) is defined as \((\frakp/\frakp^2)^\lor\), the dual \(\rkk(\frakp)\)-vector space of \(\frakp/\frakp^2\).
\end{definition}

\subsection{Artinian Rings and Length of Modules}

    \begin{definition}\label{def: length of a module}
        Let $A$ be a ring and $M$ an $A$ module.
        \textit{A simple module filtration of $M$} is a filtration
        \[ M = M_0 \supsetneq M_1 \supsetneq \cdots \supsetneq M_n = 0 \] 
        such that $M_i/M_{i-1}$ is a simple module, i.e. it has no submodule except $0$ and itself.
        If $M$ has a simple module filtration as above, we define the \textit{length of $M$} as $n$ and say that $M$ has \textit{finite length}.
    \end{definition}

    The following proposition guarantees the length is well-defined.

    \begin{proposition}\label{prop: length of a module is well defined}
        Suppose $M$ has a simple module filtration $M = M_{0,0} \supsetneq M_{1,0} \supsetneq \cdots \supsetneq M_{n,0} = 0$.
        Then for any other filtration $M = M_{0,0} \supset M_{0,1} \supset \cdots \supset M_{0,m} = 0$ with $m > n$, there exist $k<m$ such that $M_{0,k} = M_{0,k+1}$.
    \end{proposition}
    \begin{proof}
        We claim that there are at least $0\leq k_1<\cdots<k_{m-n}<m$ satisfies that $M_{0,k_i} = M_{0,k_i+1}$.
        Let $M_{i,j} := M_{i,0} \cap M_{0,j}$.
        Inductively on $n$, we can assume that there exist $k_1,\cdots,k_{n-m+1}$ such that $M_{1,k} = M_{1,k+1}$.
        Consider the sequence 
        \[ M_{0,0}/M_{1,0} \supset (M_{0,1}+M_{1,0})/M_{1,0} \supset \cdots \supset (M_{0,m}+M_{1,0})/M_{1,0} = 0 \]
        in $M_{0,0}/M_{1,0}$.
        Since $M_{0,0}/M_{1,0}$ is simple, there is at most one $k_i$ with $M_{0,k_i}+M_{1,0} \neq M_{0,k_i+1}+M_{1,0}$.
        And note that if $M_{0,k_i} + M_{1,0} = M_{0,k_i+1}+M_{1,0}$ and $M_{0,k_i} \cap M_{1,0} = M_{0,k_i} \cap M_{1,0}$, then $M_{0,k_i} = M_{0,k_i+1}$ by the Five Lemma.
    \end{proof}

    \begin{example}\label{eg: A/m is a simple module}
        Let $A$ be a ring and $\frakm \in \mSpec A$.
        Then $A/\frakm$ is a simple module.
        \Yang{To be completed.}
    \end{example}

    \begin{proposition}\label{prop: of finite length iff both acc and dcc}
        Let $A$ be a ring and $M$ an $A$-module.
        Then $M$ is of finite length iff it satisfies both a.c.c and d.c.c.
    \end{proposition}
    \begin{proof}
        Note that if $M$ has either a strictly ascending chain or a strictly descending chain, $M$ is of infinite length.
        Conversely, d.c.c guarantee $M$ has a simple submodule and a.c.c guarantee the sequence terminates.
    \end{proof}

    \begin{proposition}\label{prop: length is additive for modules of finite length}
        The length $l(-)$ is an additive function for modules of finite length.
        That is, if we have an exact sequence $0 \to M_1 \to M_2 \to M_3 \to 0$ with $M_i$ of finite length, then $l(M_2) = l(M_1) + l(M_3)$.
    \end{proposition}
    \begin{proof}
        The simple module filtrations of $M_1$ and $M_3$ will give a simple module filtration of $M_2$.
    \end{proof}

    \begin{proposition}\label{prop: characteristic of local artinian rings}
        Let $(A,\frakm)$ be a local ring.
        Then $A$ is artinian iff $\frakm^n = 0$ for some $n\geq 0$.    
    \end{proposition}
    \begin{proof}
        Suppose $A$ is artinian.
        Then the sequence $\frakm \supset \frakm^2 \supset \frakm^3 \supset \cdots$ is stable.
        It follows that $\frakm^n = \frakm^{n+1}$ for some $n$.
        By the Nakayama's Lemma \ref{thm: Nakayama's lemma}, $\frakm^n = 0$.

        Conversely, we have 
        \[ \frakm \subset \frakN \subset \bigcap_{\text{minimal prime ideal}} \frakp,\] 
        whence $\frakm$ is minimal.
    \end{proof}

    \begin{proposition}\label{prop: artinian ring is of finite length}
        Let $A$ be a ring. 
        Then $A$ is artinian iff $A$ is of finite length.
    \end{proposition}
    \begin{proof}
        First we show that $A$ has only finite maximal ideal.
        Otherwise, consider the set $\{\frakm_1 \cap \frakm_2 \cap \cdots \cap \frakm_k\}$.
        It has a minimal element $\frakm_1 \cap \cdots \cap \frakm_n$ and for any maximal ideal $\frakm$, $\frakm_1 \cap \cdots \cap \frakm_n \subset \frakm$.
        It follows that $\frakm = \frakm_i$ for some $i$.
        Let $\frakM = \frakm_1 \cap \cdots \cap \frakm_n$ be the Jacobi radical of $A$.
        Consider the sequence $\frakM \supset \frakM^2 \supset \cdots$ and by Nakayama's Lemma, we have $\frakM^k = 0$ for some $k$.
        Consider the filtration 
        \[ A \supset \frakm_1 \supset \cdots \supset \frakm_1^k \supset \frakm_1^k\frakm_2 \supset \cdots \supset \frakm_1^k \cdots \frakm_n^k  = (0). \] 
        We have $\frakm_1^k\cdots\frakm_i^j/\frakm_1^k\cdots\frakm_i^{j+1}$ is an $A/\frakm_i$-vector space.
        It is artinian and then of finite length.
        Hence $A$ is of finite length.
    \end{proof}
    
    \begin{theorem}\label{thm: artinian ring is of codimension 0}
        Let $A$ be a ring. 
        Then $A$ is artinian iff $A$ is noetherian and of dimension $0$.
        % For definition of dimension, see \ref{def: height of ideals}.
    \end{theorem}
    \begin{proof}
        Suppose $A$ is artinian.
        Then $A$ is noetherian by Proposition \ref{prop: artinian ring is of finite length}.
        Let $\frakp \in \Spec A$.
        Then $A/\frakp$ is an artinian integral domain.
        If there is $a\in A/\frakp$ is not invertible, consider $(a) \supset (a^2) \supset \cdots$, we see $a=0$.
        Hence $\frakp$ is maximal and $\dim A = 0$. 

        Suppose that $A$ is noetherian and of dimension $0$.
        Then every maximal ideal is minimal.
        In particular, $A$ has only finite maximal ideal $\frakp_1,\cdots,\frakp_n$.
        Let $\frakq_i$ be the $\frakp_i$-component of $(0)$.
        Then we have $A \injmap \bigoplus_i A/\frakq_i$.
        We just need to show that $A/\frakq_i$ is of finite length as $A$-module.
        If $\frakq_i \subset \frakp_j$, take radical we get $\frakp_i \subset \frakq_j$ and hence $i=j$.
        So $A/\frakq_i$ is a local ring with maximal ideal $\frakp_i A/\frakq_i$.
        Then every element in $\frakp_i A/\frakq_i$ is nilpotent.
        Since $\frakp_i$ is finitely generated, $(\frakp_i A/\frakq_i)^k = 0$ for some $k$.
        Then $A/\frakq_i$ is artinian and then of finite length as $A/\frakq_i$-module.
        Then the conclusion follows.
    \end{proof}


\subsection{Dedekind Domains\Yang{To be completed}}

    % \begin{definition}\label{def: Dedekind domain}
    %     A Dedekind domain is an integral domain $A$ such that
    %     \begin{enumerate}
    %         \item $A$ is noetherian;
    %         \item every nonzero prime ideal of $A$ is maximal;
    %         \item every nonzero prime ideal $\frakp$ of $A$ is of finite type, i.e. $A/\frakp$ is a finitely generated $A$-module.
    %     \end{enumerate}
    % \end{definition}

    % \begin{proposition}\label{prop: Dedekind domain is artinian iff dimension 0}
    %     Let $A$ be a Dedekind domain.
    %     Then $A$ is artinian iff $\dim A = 0$.
    % \end{proposition}
    % \begin{proof}
    %     If $A$ is artinian, then it has only finite maximal ideals and hence $\dim A = 0$ by Proposition \ref{prop: artinian ring is of codimension 0}.
    %     Conversely, if $\dim A = 0$, then every prime ideal is maximal and hence $A$ is artinian by Proposition \ref{prop: artinian ring is of codimension 0}.
    % \end{proof}


\subsection{Krull's Principal Ideal Theorem}

    % \begin{proposition}\label{prop: finite morphisms preserve dimension}
    %     Let $A \subset B$ be noetherian rings such that $B$ is finite over $A$.
    %     Then $\dim A = \dim B$.
    % \end{proposition}
    % \begin{proof}
    %     If we have a sequence $\frakP_1 \subsetneq \frakP_2$ of prime ideals in $B$, then there exists $f \in \frakP_2 \setminus \frakP_1$.
    %     Since $B$ is finite over $A$, there exist $a_1,\cdots,a_n \in A$ such that 
    %     \[ f^n + a_1f^{n-1} + \cdots + a_n = 0.\]

    %     Then $a_n \in \frakP_2 \cap A$.
    %     If $a_n \in \frakP_1$, $f^{n-1} + \cdots + a_{n_1} \in \frakP_1$ since $f \notin \frakP_1$.
    %     Then $a_{n-1} \in \frakP_2$.
    %     Repeat the process, it will terminate, whence $\frakP_1 \cap A \subsetneq \frakP_2 \cap A$.
    %     Otherwise, we have $f^n \in a_1 B+ \cdots + a_nB \subset \frakP_1$.

    %     Conversely, suppose we have $\frakp_1,\frakp_2 \in \Spec A$ with $\frakp_1 \subsetneq \frakp_2$.
    %     Choose $\frakP_1 \in \Spec B$ such that $\frakP_1 \cap A = \frakp_1$, then we have $A/\frakp_1 \subset B/\frakP_1$.
    %     Let $\frakP_2$ be the preimage of the prime ideal in $B/\frakP_1$ which is over image of $\frakp_2$ in $A/\frakp_1$.
    %     Proposition \ref{lem: finite inclusion induces surjective morphism} guarantees that such $\frakP_2$ exists.
    %     Then we get $\frakP_1 \subsetneq \frakP_2$.
    %     Repeat this progress, we get $\dim B \geq \dim A$.
    % \end{proof}

    \begin{theorem}[Krull's Principal Ideal Theorem]\label{thm: Krull's principal ideal theorem}
        Let $A$ be a noetherian ring.
        Suppose $f \in A$ is not a unit.
        Let $\frakp$ be a minimal prime ideal among those containing $f$.
        Then $\idealht(\frakp)\leq 1$.
        % Moreover, if $A$ is local or $\dim A_\frakm$ is constant for all $\frakm$, then the equality holds.
    \end{theorem}
    \begin{proof}
        By replacing $A$ by $A_\frakp$, we may assume $A$ is local with maximal ideal $\frakp$.
        Note that $A/(f)$ is artinian since it has only one prime ideal $\frakp/(f)$.

        Let $\frakq \subsetneq \frakp$.
        Consider the sequence $\frakq^{(1)} \supset \frakq^{(2)} \supset \cdots$, its image in $A/(f)$ is stationary.
        Then there exists $n \in \bbz_{\geq 0}$ such that $\frakq^{(n)} + (f) = \frakq^{(n+1)} +(f)$.
        For $x \in \frakq^{(n)}$, we may write $x = y + af$ for $y \in \frakq^{(n+1)}$.
        Then $af \in \frakq^{(n)}$.
        Since $\frakq^{(n)}$ is $\frakq$-primary and $f \notin \frakq$, $a \in \frakq^{(n)}$.
        Then we get $\frakq^{(n)} = \frakq^{(n+1)} + f \frakq^{(n)}$.
        That is, $\frakq^{(n)}/\frakq^{(n+1)} = f \frakq^{(n)}/\frakq^{(n+1)}$.
        Note that $f \in \frakp$, by Nakayama's Lemma, $\frakq^{(n)} = \frakq^{(n+1)}$.
        That is, $\frakq^n A_\frakq = \frakq^{n+1} A_\frakq$.
        By Nakayama's Lemma again, $\frakq^n A_\frakq = 0$.
        It follows that $\frakq A_\frakq$ is minimal, whence $A_\frakq$ is artinian.
        Therefore, $\frakq$ is minimal in $A$.
    \end{proof}

    \begin{corollary}\label{cor: geometric form of principal ideal theorem}
        Let $A$ be a noetherian local ring.
        Suppose $f \in A$ is not a unit.
        Then $\dim A/(f) \geq \dim A - 1$.
        If $f$ is not contained in a minimal prime ideal, the equality holds.
    \end{corollary}
    \begin{proof}
        Let $\frakp_0 \subsetneq \cdots \subsetneq \frakp_n$ be a sequence of prime ideals.
        By assumption, $f \in \frakp_n$.
        If $f \in \frakp_0$, we get a sequence of prime ideals in $A/(f)$ of length $n$.
        Now we suppose $f \notin \frakp_0$.
        Then there exists $k \geq 0$ such that $f \in \frakp_{k+1} \setminus \frakp_{k}$. 
            
        Choose $\frakq$ be a minimal prime ideal among those containing $(\frakp_{k-1},f)$ and contained in $\frakp_{k+1}$.
        Then by Krull's Principal Ideal Theorem \ref{thm: Krull's principal ideal theorem}, $\frakq_k \subsetneq \frakp_{k+1}$.
        Replace $\frakp_k$ by $\frakq_k$, we have $f \in \frakq_{k} \setminus \frakp_{k-1}$

        Repeat this process, we get a sequence $\frakp_0' \subsetneq \cdots \subsetneq \frakp_n'$ such that $f \in \frakp_1'$.
        This gives a sequence $\frakp_1' \subsetneq \cdots \subsetneq \frakp_n'$ in $A/(f)$.
        Hence we get $\dim A/(f) \geq \dim A - 1$.
 
        % Then there exist a prime ideal $\frakp_0 \subsetneq (f)$.
        Since $f$ is not contained in minimal prime ideal, preimage of a minimal prime ideal in $A/(f)$ has height $1$.
        Hence a sequence of prime ideals in $A/fA$ can be extended by a minimal prime ideal in $A$.
        It follows that $\dim A/(f) + 1 \leq \dim A$.
    \end{proof}

    % For varieties, the Krull dimension behaves well by follows.

    % \begin{lemma}\label{lem: dimension of algebraic varieties}
    %     Let $X$ be an algebraic variety over $\kk$.
    %     Then for every closed point $x \in X(\kkk)$, we have 
    %     \[ \dim X = \dim \calo_{X,x} = \trdeg(\fkk(X)/\kk). \] 
    % \end{lemma}
    % \begin{proof}
    %     Since $X$ is irreducible, we may assume that $X = \Spec A$ is affine.
    %     Let $d = \trdeg(\fkk(X)/\kk)$.

    %     By Noether's Normalization Lemma \ref{thm: Noether's Normalization Lemma}, there is an injective and finite homomorphism $A_0 = \kk[T_1,\cdots,T_d] \injmap A$.
    %     Let $\frakM$ be the corresponding maximal ideal of $x$ in $A$ and $\frakm = \frakM \cap \kk[T_1,\cdots,T_d]$.
    %     Denote the image of $T_i$ in $\exk:=A_0/\frakm$ by $t_i$.
    %     The extension $\exk/\kk$ is finite by Nullstellensatz \ref{thm: Nullstellensatz}.
    %     Let $f_i\in \kk[T]$ be the minimal polynomial of $t_i$ and $g_i:= f_i(T_i) \in A_0$.
    %     Then $g_i \in \frakm$ and $\frakm = g_1A_0 +\cdots,g_d A_0$.
    %     In particular, $g_1,\cdots,g_d \in \frakM$.

    %     We have $A/g_1A+\cdots+g_dA$ is finite over $A_0/\frakm$, whence it is artinian.
    %     This implies that $A_\frakM/g_1A_\frakM + \cdots + g_dA_\frakM$ is also artinian.
    %     Since $g_{k+1}$ is not a zero divisor in $A_0/g_1A_0+\cdots+g_kA_0$, $g_{k+1}$ is not contained in any minimal prime ideal of $A_0/g_1A_0+\cdots+g_kA_0$.
    %     Then $g_{k+1}$ is also not contained in any minimal prime ideal of $A/g_1A+\cdots+g_kA$.
    %     By Corollary \ref{cor: geometric form of principal ideal theorem}, $\dim A_\frakM = \dim (A_\frakM/g_1A_\frakM + \cdots + g_dA_\frakM) + d = d$.
    % \end{proof}

    % \begin{theorem}\label{thm: dimension of varieties}
    %     Let $S$ be spectrum of a field $\kk$ or an algebraic integer ring $\calo_K$ and $X$ an integral $S$-variety.
    %     Then we have the follows:
    %     \begin{enumerate}[label=(\roman*)]
    %         \item For every point $\xi \in X$, $\dim X = \dim \calo_{X,\xi} + \codim Z_\xi$.
    %         \item For every non-empty open subset $U \subset X$, $\dim U = \dim X$.
    %         \item $\dim X = \trdeg(\fkk(X)/\fkk(S)) + \dim S$.
    %     \end{enumerate}
    % \end{theorem}
    % \begin{proof}
    %     \Yang{To be continued.}
    % \end{proof}

    % \begin{example}
    %     For general noetherian schemes, Theorem \ref{thm: dimension of varieties} may not hold.
    %     Let $A = \kk[t]$, $\frakm = (t)$, $B=A_\frakm[x]$ and $X = \Spec B$.
    %     Then we have $\dim X = 2$ since 
    %     \Yang{To be added.}
    % \end{example}


    % \paragraph{Depth}
    % For a noetherian local ring $(A,\frakm)$, we can define the depth of an $A$-module $M$.
    % Somehow the Krull dimension is ``homological'' and the depth is ``cohomological''.

    % \begin{definition}\label{def: regular sequence}
    %     Let $A$ be a noetherian ring, $I \subset A$ an ideal and $M$ a finitely generated $A$-module.
    %     A sequence $t_1,\cdots,t_n\in \frakm$ is called an \textit{$M$-regular sequence in $I$} if $t_i$ is not a zero divisor on $M/(t_1,\cdots,t_{i-1})M$ for all $i$. 
    % \end{definition}

    % \begin{example}
    %     Let $A = \kk[x,y]/(x^2,xy)$ and $I = (x,y)$.
    %     Then $\depth_I A = 0$.
    % \end{example}

    % \begin{definition}
    %     The \textit{$I$-depth} of $M$ is defined as the maximum length of $M$-regular sequences in $I$, denoted by $\depth_I M$. 
    %     When $A$ is a local ring with maximal ideal $\frakm$, we write $\depth M$ for $\depth_{\frakm} M$.
    % \end{definition}

    % \paragraph{Regular and Serre's conditions}
    % Up to now, there are three numbers measuring the ``size'' of a local ring $(A,\frakm)$:
    % \begin{itemize}
    %     \item $\dim A$: the Krull dimension of $A$.
    %     \item $\depth A$: the depth of $A$.
    %     \item $\dim_{\rkk(\frakm)} T_{A,\frakm}$: the dimension of Zariski tangent space $T_{A,\frakm} := (\frakm/\frakm^2)^\lor$ as a ${\rkk(\frakm)}$-vector space.
    % \end{itemize}

    % These three numbers are related by the following inequalities.
    \begin{proposition}\label{prop: inequality of depth, dimension and dimension of tangent space}
        Let $(A,\frakm)$ be a local noetherian ring with residue field $\kk$.
        Then the following inequalities hold:
        \[ \depth A \leq \dim A \leq \dim_\kk T_{A,\frakm}. \]
    \end{proposition}
    \begin{proof}
        The first inequality is a direct corollary of Corollary \ref{cor: geometric form of principal ideal theorem}.

        Let $t_1,\cdots,t_n$ be a $\rkk(\frakm)$-basis of $\frakm/\frakm^2$.
        Then we have $\frakm/(t_1,\cdots,t_n)+\frakm^2 = 0$, whence $\frakm/(t_1,\cdots,t_n) = \frakm(\frakm/(t_1,\cdots,t_n))$.
        It follows that $\frakm = (t_1,\cdots,t_n)$ by Nakayama's Lemma.
        By Corollary \ref{cor: geometric form of principal ideal theorem}, 
        \[ n + \dim A/(t_1,\cdots,t_n) \geq n-1 + \dim A/(t_1,\cdots,t_{n-1}) \geq \cdots \geq 1 + \dim A/(t_1) \geq \dim A. \]  
        We conclude the result.
    \end{proof}

    \begin{definition}\label{def: regular and Serre's conditions}
        Let $X$ be a locally noetherian scheme and $k \in \bbz_{\geq 0}$.
        We say that \textit{$X$ verifies property $(R_k)$} or \textit{is regular in codimension $k$} if $\forall \xi \in X$ with $\codim Z_\xi \leq k$, 
        \[ \dim_{\rkk(\xi)} T_{X,\xi} = \dim \calo_{X,\xi}. \]
        We say that \textit{$X$ verifies property $(S_k)$} if $\forall \xi \in X$ with $\depth \calo_{X,\xi} < k$,
        \[ \depth \calo_{X,\xi} = \dim \calo_{X,\xi}. \]        
    \end{definition}

    % \begin{lemma}\label{lem: trick lemma: subideal in union of prime belongs one}
    %     Let $A$ be a ring and $\fraka \subset \bigcup_i \frakp_i$.
    %     Then $\fraka \subset \frakp_i$ for some $i$.
    % \end{lemma}
    % \begin{proof}
    %     \Yang{To be completed.}
    % \end{proof}

    \begin{example}\label{eg: S_1 is equivalent to A has no embedded point}
        Let $A$ be a noetherian ring.
        Then $A$ verifies $(S_1)$ iff $A$ has no embedded point.
        
        Suppose $A$ verifies $(S_1)$.
        If $\frakp \in \Ass A$, every element in $\frakp$ is a zero divisor.
        Then $\depth A_{\frakp} = 0$.
        It follows that $\dim A_\frakp = 0$ and then $\frakp$ is minimal. 

        Suppose $A$ has no embedded point.
        Let $\frakp \in \Spec A$ with $\depth A_\frakp = 0$.
        This means every element in $\frakp A_\frakp$ is a zero divisor.
        Then 
        \[ \frakp \subset \{\text{zero divisors in } A\} = \bigcup_{\text{minimal prime ideals}} \frakq. \]
        By Proposition \ref{prop: prime avoidance lemma primity of prime ideals}, $\frakp = \frakq$ for some minimal $\frakq$, whence $\dim A_\frakp = 0$. 
    \end{example}

    % \begin{example}\label{eg: S_2 is equivalent to A/fA has no embedded point}
    %     Let $A$ be a noetherian ring verifies $(S_1)$.
    %     Then $A$ verifies $(S_2)$ iff for any nonzero divisor $f \in A$, $\Ass_A A/fA$ has no embedded point.

    %     Suppose $A$ verifies $(S_2)$.
    %     Let $f \in A$ be a nonzero divisor and $\frakp \in \Ass_A A/fA$.
    %     There exist $g \in A \setminus fA$ such that $\frakp = (f:g)$.
    %     For any $t_1,t_2 \in \frakp$, there exist $s_1,s_2$ with $s_i \notin (t_i)$ and $t_i g = f s_i$.
    %     Then $t_1t_2g = fs_1t_2 = fs_2t_1$.
    %     Since $f$ is not a zero divisor, $s_1t_2 = s_2t_1$.
    %     Then $t_2$ is a zero divisor in $A_\frakp/t_1 A_\frakp$ since $s_1 \notin (t_1)$.
    %     Since $f \in \frakp$, $\depth A_\frakp = 1$ and then $\idealht \frakp = 1$.
    %     This show that $\frakp$ is not embedded in $\Ass_A A/fA$.
        
    %     Conversely, suppose $\Ass_A A/fA$ has no embedded point.
    %     Let $\frakp \in \Spec A$ with $\depth A_{\frakp} = 1$.
    %     Then there exists $f \in A_{\frakp}$ which is not a zero divisor.
    %     We have $\depth A_{\frakp}/fA_\frakp = 0$ and $\Ass_A A/fA$ has no embedded point, whence $\frakp$ is minimal in $A/fA$.
    %     Then $\idealht \frakp = 1$ by Krull's Principal Ideal Theorem \ref{thm: Krull's principal ideal theorem} and the fact $f$ is not a zero divisor.
    % \end{example}

    \begin{example}\label{eg: R-S criterion of reducedness}
        Let $A$ be a noetherian ring.
        Then $A$ is reduced iff it verifies $(R_0)$ and $(S_1)$.

        Suppose $A$ is reduced.
        Let $\frakp_1,\cdots,\frakp_n$ be all minimal prime ideals of $A$.
        We have $\bigcap \frakp_i = \frakN = (0)$, where $\frakN$ is the nilradical of $A$.
        Hence $A$ has no embedded point.
        Since $A_\frakp$ is artinian, local and reduced, $A_\frakp$ is a field and hence regular.
        
        Conversely, let $\Ass A$ be equal to $\{\frakp_1,\cdots,\frakp_n\}$.
        Then every $\frakp_i$ is minimal by $(S_1)$.
        Let $f$ be in $\frakN$.
        Then the image of $f$ in $A_{\frakp_i}$ is $0$ since by $(R_0)$, $A_{\frakp_i}$ is a field.
        It follows that $f \in \frakq_i$, where $\frakq_i$ is the $\frakp_i$ component of $(0)$ in $A$.
        Hence $f \in \bigcap \frakq_i = (0)$.
        That is, $A$ is reduced.
    \end{example}

%     \begin{definition}\label{def: regular and Serre's conditions}
%         Let $X$ be a locally noetherian scheme and $k \in \bbz_{\geq 0}$.
%         We say that \textit{$X$ verifies property $(R_k)$} or \textit{is regular in codimension $k$} if $\forall \xi \in X$ with $\codim Z_\xi \leq k$, 
%         \[ \dim_{\rkk(\xi)} T_{X,\xi} = \dim \calo_{X,\xi}. \]
%         We say that \textit{$X$ verifies property $(S_k)$} if $\forall \xi \in X$ with $\depth \calo_{X,\xi} < k$,
%         \[ \depth \calo_{X,\xi} = \dim \calo_{X,\xi}. \]        
%     \end{definition}

%     % \begin{lemma}\label{lem: trick lemma: subideal in union of prime belongs one}
%     %     Let $A$ be a ring and $\fraka \subset \bigcup_i \frakp_i$.
%     %     Then $\fraka \subset \frakp_i$ for some $i$.
%     % \end{lemma}
%     % \begin{proof}
%     %     \Yang{To be completed.}
%     % \end{proof}

%     \begin{example}\label{eg: S_1 is equivalent to A has no embedded point}
%         Let $A$ be a noetherian ring.
%         Then $A$ verifies $(S_1)$ iff $A$ has no embedded point.
        
%         Suppose $A$ verifies $(S_1)$.
%         If $\frakp \in Ass A$, every element in $\frakp$ is a zero divisor.
%         Then $\depth A_{\frakp} = 0$.
%         It follows that $\dim A_\frakp = 0$ and then $\frakp$ is minimal. 

%         Suppose $A$ has no embedded point.
%         Let $\frakp \in \Spec A$ with $\depth A_\frakp = 0$.
%         This means every element in $\frakp A_\frakp$ is a zero divisor.
%         Then 
%         \[ \frakp \subset \{\text{zero divisors in } A\} = \bigcup_{\text{minimal prime ideals}} \frakq. \]
%         By Lemma \ref{lem: trick lemma: subideal in union of prime belongs one}, $\frakp = \frakq$ for some minimal $\frakq$, whence $\dim A_\frakp = 0$. 
%     \end{example}

%     \begin{example}\label{eg: S_2 is equivalent to A/fA has no embedded point}
%         Let $A$ be a noetherian ring verifies $(S_1)$.
%         Then $A$ verifies $(S_2)$ iff for any nonzero divisor $f \in A$, $\Ass_A A/fA$ has no embedded point.

%         Suppose $A$ verifies $(S_2)$.
%         Let $f \in A$ be a nonzero divisor and $\frakp \in \Ass_A A/fA$.
%         There exist $g \in A \setminus fA$ such that $\frakp = (f:g)$.
%         For any $t_1,t_2 \in \frakp$, there exist $s_1,s_2$ with $s_i \notin (t_i)$ and $t_i g = f s_i$.
%         Then $t_1t_2g = fs_1t_2 = fs_2t_1$.
%         Since $f$ is not a zero divisor, $s_1t_2 = s_2t_1$.
%         Then $t_2$ is a zero divisor in $A_\frakp/t_1 A_\frakp$ since $s_1 \notin (t_1)$.
%         Since $f \in \frakp$, $\depth A_\frakp = 1$ and then $\idealht \frakp = 1$.
%         This show that $\frakp$ is not embedded in $\Ass_A A/fA$.
        
%         Conversely, suppose $\Ass_A A/fA$ has no embedded point.
%         Let $\frakp \in \Spec A$ with $\depth A_{\frakp} = 1$.
%         Then there exists $f \in A_{\frakp}$ which is not a zero divisor.
%         We have $\depth A_{\frakp}/fA_\frakp = 0$ and $\Ass_A A/fA$ has no embedded point, whence $\frakp$ is minimal in $A/fA$.
%         Then $\idealht \frakp = 1$ by Krull's Principal Ideal Theorem \ref{thm: Krull's principal ideal theorem} and the fact $f$ is not a zero divisor.
%     \end{example}

%     \begin{example}\label{eg: R-S criterion of reducedness}
%         Let $X$ be a locally noetherian scheme.
%         Then $X$ is reduced iff it verifies $(R_0)$ and $(S_1)$.

%         The properties are local, whence we can assume $X=\Spec A$.
%         Suppose $A$ is reduced.
%         Let $\frakp_1,\cdots,\frakp_n$ be all minimal prime ideals of $A$.
%         We have $\bigcap \frakp_i = \frakN = (0)$, where $\frakN$ is the nilradical of $A$.
%         Hence $A$ has no embedded point.
%         Since $A_\frakp$ is artinian, local and reduced, $A_\frakp$ is a field and hence regular.
        
%         Conversely, let $\Ass A$ be equal to $\{\frakp_1,\cdots,\frakp_n\}$.
%         Then every $\frakp_i$ is minimal by $(S_1)$.
%         Let $f$ be in $\frakN$.
%         Then the image of $f$ in $A_{\frakp_i}$ is $0$ since by $(R_0)$, $A_{\frakp_i}$ is a field.
%         It follows that $f \in \frakq_i$, where $\frakq_i$ is the $\frakp_i$ component of $(0)$ in $A$.
%         Hence $f \in \bigcap \frakq_i = (0)$.
%         That is, $A$ is reduced.
%     \end{example}


\subsection{Cohen-Macaulay rings}

    \begin{definition}[Cohen-Macaulay]\label{def: Cohen-Macaulay}
        A noetherian local ring $(A,\frakm)$ is called \textit{Cohen-Macaulay} if $\dim A = \depth A$.
        A noetherian ring $A$ is called \textit{Cohen-Macaulay} if for every prime ideal $\frakp \in \Spec A$, the localization $A_\frakp$ is Cohen-Macaulay.
        This is equivalent to that \(A\) verifies $(S_k)$ for all \(k \geq 0\).
    \end{definition}

    \begin{example}[Non Cohen-Macaulay rings]
        \Yang{To be completed.}
    \end{example}

    % \begin{proposition}\label{prop: depth equals to grade}
    %     Let $(A, \frakm, \kk)$ be a noetherian local ring and $M$ a finite $A$-module.
    %     Then 
    %     \[ \depth M := \inf \{ i : \Ext^i_A(\kk,M) \neq 0 \}. \]
    % \end{proposition}
    % \begin{proof}
    %     Let $a \in \frakm$ be $M$-regular and $N = M/aM$.
    %     Then we claim that
    %     \[ \inf \{ i: \Ext^i_A(\kk,N) \neq 0 \} = \inf \{ i : \Ext^i_A(\kk,M) \neq 0 \} - 1. \]
    %     Indeed, we have an exact sequence
    %     \[ 0 \to M \xrightarrow{a} M \to N \to 0. \]
    %     It induces a long exact sequence
    %     \[ \cdots \to \Ext^{i-1}_A(\kk,M) \to \Ext^{i-1}_A(\kk,N) \to \Ext^i_A(\kk,M) \xrightarrow{\Ext^i_A(\kk,\Mult_a)} \Ext^i_A(\kk,M) \to \cdots. \]
    %     Note that $a \in \frakm$, then $\Ext^i_A(\kk,\Mult_a) = 0$.
    %     It follows that when $\Ext^{i-1}_A(\kk,M) = 0$, we have $\Ext^{i-1}_A(\kk,N) = 0$ iff $\Ext^i_A(\kk,M) = 0$, whence the claim.

    %     Let $n = \inf \{ i : \Ext^i_A(\kk,M) \neq 0 \}$.
    %     Induct on $n$.
    %     Suppose first $n = 0$.
    %     Since $\kk$ is a simple $A$-module, there is an injective homomorphism $\kk \to M$.
    %     Then $\frakm \in \Ass M$ and hence $\depth M = 0$.
        
    %     Suppose $n > 0$., let $a_1,\cdots,a_m \in \frakm$ be any $M$-regular sequence.
    %     Using the claim inductively on $M/(a_1,\cdots,a_m)M$, we have $n \geq \depth$.
    %     If $M$ has no regular element, then $\frakm \subset \bigcup_{\frakp \in \Ass M} \frakp$.
    %     Then $\frakm = \frakp$ for some $\frakp \in \Ass M$.
    %     This show that we can find $x \neq 0 \in M$ such that $\frakp = \Ann x$.
    %     It gives a homomorphism $\kk = A/\frakm \to M$.
    %     That is a contradiction and hence $M$ has a regular element.
    %     Let $a$ be $M$-regular and $N = M/aM$.
    %     Then $\depth N = n-1$ by the claim and induction hypothesis.
    %     Hence we have $\depth M \geq n$.
    % \end{proof}

    \begin{corollary}\label{cor: induction on depth}
        Let $A$ be a noetherian ring, $M$ a finite $A$-module and $a \in A$ an $M$-regular element.
        Then $\depth M = \depth M/aM + 1$.
    \end{corollary}

    \begin{corollary}\label{cor: induction on S_d conditions}
        Let $A$ be a noetherian ring $a \in A$ a nonzero divisor.
        Then $A$ verifies $(S_d)$ iff $A/aA$ verifies $(S_{d-1})$.
    \end{corollary}

    \begin{definition}\label{def: unmixedness theorem}
        An ideal $I$ of a noetherian ring $A$ is called \textit{unmixed} if 
        \[ \idealht(I) = \idealht(\frakp), \quad \forall \frakp \in \Ass(A/I). \]
        Here $\idealht(I)$ is defined as 
        \[ \idealht(I) := \inf \{ \idealht(\frakp) : I \subset \frakp \}. \]
        We say that \textit{the unmixedness theorem holds for a noetherian ring $A$} if any ideal $I \subset A$ generated by $\idealht(I)$ elements is unmixed.
        We say that \textit{the unmixedness theorem holds for a locally noetherian scheme $X$} if $\calo_{X,\xi}$ is unmixed for any point $\xi \in X$.
    \end{definition}


    \begin{theorem}\label{thm: unmixedness theorem for Cohen-Macaulay schemes}
        Let $X$ be a locally noetherian scheme.
        Then the unmixedness theorem holds for $X$ if and only if $X$ is Cohen-Macaulay.
    \end{theorem}
    \begin{proof}
        We can assume that $X = \Spec A$ is affine.

        Suppose $X$ is Cohen-Macaulay.
        Let $I \subset A$ be an ideal generated by $a_1,\cdots,a_r$ with $r = \idealht(I)$.
        We claim that $a_1,\cdots,a_r$ is an $A$-regular sequence.
        If so, we get that the unmixedness theorem holds for $A$ by applying Example \ref{eg: S_1 is equivalent to A has no embedded point} on $A/I$. 
        Since $\idealht(a_1,\cdots,a_{r-1}) \leq r-1$ by Krull's Principal Ideal Theorem \ref{thm: Krull's principal ideal theorem} and $\idealht(a_1,\cdots,a_r) = r \leq \idealht(a_1,\cdots,a_{r-1}) + 1$, we have $\idealht(a_1,\cdots,a_{r-1}) = r-1$.
        By induction on $r$, we can assume that $a_1,\cdots,a_{r-1}$ is an $A$-regular sequence.
        Hence any prime ideal $\frakp \in \Ass A/(a_1,\cdots,a_{r-1})$ has height $r-1$.
        Now suppose $a_r$ is a zero divisor in $A/(a_1,\cdots,a_{r-1})$.
        Then there exists a prime ideal $\frakp \in \Ass A/(a_1,\cdots,a_{r-1})$ such that $a_r \in \frakp$.
        Then $I \subset \frakp$ and $\idealht(I) \leq r-1$.
        This contradicts that $\idealht(I) = r$.
        
        Suppose the unmixedness theorem holds for $A$.
        Let $\frakp \in \Spec A$ be a prime ideal with $\idealht(\frakp) = r$.
        Then $\frakp \in \Ass A$ if and only if $\idealht(\frakp) = 0$.
        If $r > 0$, there is a nonzero divisor $a \in \frakp$.
        By Krull's Principal Ideal Theorem \ref{thm: Krull's principal ideal theorem}, $\idealht(\frakp A/aA) = r-1$.
        Inductively, we can find a regular sequence $a_1,\cdots,a_r$ in $\frakp$.
        Then $\depth A_\frakp = r$.
        % \Yang{To be completed.}
    \end{proof}

    \begin{theorem}\label{thm: higher dimensional hartogs lemma for Cohen-Macaulay schemes}
        Let $X$ be a locally noetherian scheme.
        Suppose that $X$ is Cohen-Macaulay.
        Let $F \subset X$ be a closed subset of codimension $\geq k$.
        Then the restriction $H^i(X,\calo_X) \to H^i(X\setminus F, \calo_{X})$ is an isomorphism.
    \end{theorem}
    \begin{proof}
        \Yang{To be completed.}
    \end{proof}

    
\subsection{Regular rings}

    % \begin{proposition}
    %     Let $(A,\frakm)$ be a regular local ring.
    %     Then $A$ is integral.
    % \end{proposition}

    % \begin{proposition}
    %     If $X$ verifies $(R_k)$, then $\codim_X X_{\text{sing}} \geq k+1$.
    % \end{proposition}



    \begin{definition}\label{def: regular ring}
        A noetherian ring \(A\) is said to be \emph{regular at \(\frakp \in \Spec A\)} if we have 
        \[ \dim_{\rkk(\frakp)} T_{A,\frakp} = \dim A_\frakp, \]
        where \(\dim A_\frakp\) is the Krull dimension of the local ring \(A_\frakp\).
        
        A noetherian ring \(A\) is said to be \emph{regular} if it is regular at every prime ideal \(\frakp \in \Spec A\).
        This is equivalent to the condition that \(A\) verifies \((R_k)\) for all \(k \geq 0\).
    \end{definition}

    \begin{definition}\label{def: regular system of parameters}
        Let \(A\) be a noetherian ring that is regular at \(\frakp \in \Spec A\).
        A sequence \(t_1,\cdots,t_n \in \frakp\) is called a \emph{regular system of parameters} at \(\frakp\) if their images form a basis of the \(\rkk(\frakp)\)-vector space \(\frakp/\frakp^2\).
    \end{definition}

    \begin{proposition}\label{prop: regular system of parameters is a regular sequence}
        Let \((A,\frakm)\) be a noetherian local ring that is regular at \(\frakm\).
        Let \(t_1,\cdots,t_n\) be a regular system of parameters at \(\frakm\), \(\frakp_i = (t_1,\cdots,t_i)\) and \(\frakp_0 = (0)\).
        Then \(\frakp_i\) is a prime ideal of height \(i\), and \(A/\frakp_i\) is a regular local ring for all \(i\).
        In particular, regular local ring is integral, and the regular system of parameters \(t_1,\cdots,t_n\) is a regular sequence in \(A\).
    \end{proposition}
    \begin{proof}
        By the Krull's Principal Ideal Theorem \ref{thm: Krull's principal ideal theorem}, we have 
        \[ n-1 = \dim A - 1 \leq \dim A/(t_1) \leq \dim_{\rkk(\frakm/(t_1))} T_{A/(t_1), \frakm/(t_1)} \leq n-1.  \]
        Hence \(\dim A/(t_1) = n-1\) and \(\idealht (t_1) = 1\).
        Since \(t_2,\cdots,t_n\) generate \(\frakm/(t_1)\), we have that \(A/(t_1)\) is regular at \(\frakm/(t_1)\) and the images of \(t_2,\cdots,t_n\) form a regular system of parameters.
    
        For integrality, we induct on the dimension of \(A\).
        If \(\dim A = 0\), then \(A\) is a field and hence integral.
        Suppose \(\dim A > 0\), let \(\frakq\) be a minimal prime ideal of \(A\).
        Then \(t_1 \not\in \frakq\).
        We have 
        \[ n - 1 = \dim A - 1 \leq \dim A/(\frakq + t_1A) \leq \dim_{\rkk(\frakq/(t_1))} T_{A/(\frakq + t_1A), \frakq/(t_1)} \leq n - 1. \]
        By similar arguments, we have \(A/(\frakq + t_1A)\) is regular at \(\frakm/(\frakq + t_1A)\).
        By induction hypothesis, both of \(A/t_1A\) and \(A/(\frakq + t_1A)\) are integral and of dimension \(n-1\).
        Hence \(t_1 A = t_1 A + \frakq\), i.e. \(\frakq \subset t_1 A\).
        For every \(a = bt_1 \in \frakq\), we have \(b \in \frakq\) since \(t_1 \not\in \frakq\).
        Then \(\frakq \subset t_1\frakq \subset \frakm \frakq\).
        By Nakayama's Lemma, \(\frakq = 0\), whence \(A\) is integral. 
    \end{proof}

    \begin{corollary}\label{cor: regular ring is Cohen-Macaulay}
        A regular ring is Cohen-Macaulay.
    \end{corollary}

    \begin{corollary}
        A regular ring is normal.
    \end{corollary}


    \begin{remark}\label{prop: regularity is a local property}
        A noetherian ring \(A\) is regular if and only if it is regular at every maximal ideal \(\frakm \in \mSpec A\). 
        The proof uses homomorphism tools; see Theorem \ref{thm: regularity and finite homological dimension} and Corollary \ref{cor: regular local ring is regular}.
    \end{remark}
    % \begin{proof}
    %     Suppose \(\frakp \subset \frakm\) and \(A\) is regular at \(\frakm\).
        
    %     \Yang{To be completed.}
    % \end{proof}


    % \begin{proposition}\label{prop: regularity under base field extension}
    %     Let \(\kk\) be a field, \(\kk'\) an algebraic extension of \(\kk\), \(A\) an integral \(\kk\)-algebra of finite type and \(A' \coloneqq A \ten_{\kk} \kk'\).
    %     Let \(\frakm \in \mSpec A\) and \(\frakm'\) be a maximal ideal of \(A'\) lying over \(\frakm\).
    %     Then 
    %     \begin{enumerate}
    %         \item If \(A'\) is regular at \(\frakm'\), then \(A\) is regular at \(\frakm\);
    %         \item suppose \(\rkk(\frakm)\) is separable over \(\kk\), the converse holds.
    %     \end{enumerate}
    % \end{proposition}
    % \begin{proof}
    %     We claim that $\frakm'^2 \cap A = \frakm^2$.
    %     Suppose \(\frakm = (g_1,\cdots,g_n)\).
    %     Let \(f \in A \cap \frakm'^2\).
    %     We can assume that \(f\) is in the form \(f = \sum_{i=1}^n a_i g_i\) for some \(a_i \in A\) satisfy that \(\deg_{T_i} a_j \leq \deg g_i, \forall i,j\).

    %     The map $\frakm \to \frakm' \to \frakm'/\frakm'^2$ induces a map $\frakm/\frakm^2 \to \frakm'/\frakm'^2$.
    %     This is a \(\rkk(\frakm)\)-linear map.
    %     \Yang{To be completed.}
    % \end{proof}

    % \begin{remark}\label{remark: Taylor expansion with respect to irreducible polynomials}
    %     Let \(\kk\) be arbitrary field, \(A = \kk[T_1,\cdots,T_n]\) and \(g_i\) irreducible polynomials in one variable \(T_i\) over \(\kk\).
    %     Then for every \(f \in A\), we can write
    %     \[ f = \sum_{I=(i_1,\cdots,i_n) \in \bbz_{\geq 0}^n} a_I g_1^{i_1}\cdots g_n^{i_n}, \quad a_I \in A, \quad \deg_{T_i} a_I \leq \deg g_i.\]
    %     This is called the \textit{Taylor expansion of \(f\) with respect to \(g_1,\cdots,g_n\)}. 
    % \end{remark}


