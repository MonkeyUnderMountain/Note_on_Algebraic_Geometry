\section{Line bundles and divisors}

\subsection{Cartier divisors}

    \begin{definition}\label{def:Cartier_divisor}
        Let \(X\) be a scheme. 
        A \emph{Cartier divisor} on \(X\) is a global section of the sheaf of groups \(\calK_X^*/\calO_X^*\), where \(\calK_X\) is the sheaf of total quotient rings of \(X\).
        Equivalently, a Cartier divisor \(D\) can be represented by an open covering \(\{U_i\}\) of \(X\) and a collection of rational functions \(f_i \in \calK_X^*(U_i)\) such that for any \(i, j\), the function \(f_i/f_j \in \calO_X^*(U_i \cap U_j)\).
        We denote a Cartier divisor by \(D = \{(U_i, f_i)\}\).
    \end{definition}

\subsection{Line bundles and Picard group}

    \begin{definition}\label{def:line_bundle}
        Let \(X\) be a scheme.
        A \emph{line bundle} on \(X\) is a locally free sheaf of \(\calO_X\)-modules of rank \(1\).
    \end{definition}
    \begin{example}\label{eg:twisted_line_bundle_O_n_on_projective_scheme}
        Let \(X = \bbP^n_A = \Proj A[T_0, T_1, \ldots, T_n] = \Proj B\) be the projective \(n\)-space over a ring \(A\).
        For each integer \(d \in \bbZ\), the sheaf \(\calO_X(d)\), defined by
        \[ \{ f \neq 0 \} \mapsto B(d)_{(f)}, \]
        is a line bundle on \(X\), called the \Yang{\emph{twisted line bundle}} of degree \(d\).
        Recall that here \(B(d)_{(f)}\) is the degree-zero part of the localization of the shifted graded ring \(B(d)\) at the multiplicative set generated by \(f\), 
        and \(B(d)\) is defined by \(B(d)_m = B_{m+d}\) for all \(m \in \bbZ\).

        Let us verify this by direct computation.
        On the standard open subset \(U_i = D_+(T_i) = \Spec B_i\), where \(B_i = A\left[T_0/T_i, \ldots, T_n/T_i\right]\), write \(t_{j,i} = T_j/T_i\).
        We have 
        \[ \calO_X(d)(U_i) = B(d)_{(T_i)}^0 = \left\{ \frac{f}{T_i^k} \middle| f \in B, \deg f = k+d \right\} = B_i \cdot T_i^d =: B_i \cdot e_i, \]
        where we denote \(e_i = T_i^d\).
        Hence \(\calO_X(d)(U_i)\) is a free \(B_i\)-module of rank \(1\) and thus \(\calO_X(d)\) is locally free of rank \(1\).

        In the language of bundles, on \(U_{ij} = U_i \cap U_j\), we have 
        \[ e_i = t_{i,j}^d \cdot e_j. \]
        Thus the transition functions of \(\calO_X(d)\) are given by \(\{(U_{ij},\ t_{i,j}^d:U_{ij} \to \bbG_m)\}\).
    \end{example}

    \begin{proposition}\label{prop:line_bundles_under_tensor_product_and_dual}
        Let \(X\) be a scheme and \(\calL, \calL'\) two line bundles on \(X\).
        Then 
        \begin{enumerate}
            \item the tensor product \(\calL \otimes_{\calO_X} \calL'\) is also a line bundle on \(X\);
            \item the dual \(\calL^\vee = \calHom_{\calO_X}(\calL, \calO_X)\) is also a line bundle on \(X\);
            \item there is a natural isomorphism \(\calL \otimes_{\calO_X} \calL^\vee \cong \calO_X\).
        \end{enumerate}
    \end{proposition}
    \begin{proof}
        
    \end{proof}

    \begin{definition}\label{def:picard_group}
        Let \(X\) be a scheme. 
        The \emph{Picard group} of \(X\) is defined to be the group of isomorphism classes of line bundles on \(X\) with the group operation given by the tensor product.
        It is denoted by \(\Pic(X)\).
    \end{definition}

    \begin{definition}\label{def:algebraically_equivalent_line_bundles}
        Let \(X\) be a scheme over a field \(\kk\) and \(\calL, \calL'\) two line bundles on \(X\).
        We say that \(\calL\) and \(\calL'\) are \emph{algebraically equivalent} if there exists a \Yang{non-singular} variety \(T\) over \(\kk\), two points \(t_0, t_1 \in T(\kkk)\) and a line bundle \(\calM\) on \(X \times T\) such that 
        \[ \calM|_{X \times \{t_0\}} \cong \calL, \quad \calM|_{X \times \{t_1\}} \cong \calL'. \]
        We denote it by \(\calL \sim_{\text{alg}} \calL'\).
        \Yang{To be checked.}
    \end{definition}

\subsection{Weil divisors and reflexive sheaves}

    To talk about Weil divisors, we need to work with normal schemes.

    \begin{definition}\label{def:Weil_divisor}
        Let \(X\) be a normal integral scheme.
        A \emph{Weil divisor} on \(X\) is a formal sum 
        \[ D = \sum_{Z} n_Z Z, \]
        where the sum runs over all prime divisors \(Z\) of \(X\) (i.e., integral closed subschemes of codimension 1) and \(n_Z \in \bbZ\), such that for any affine open subset \(U = \Spec A \subseteq X\), only finitely many \(Z\) intersecting \(U\) have nonzero coefficients \(n_Z\).
        The group of Weil divisors on \(X\) is denoted by \(\WDiv(X)\).
    \end{definition}

    \begin{definition}\label{def:reflexive_sheaves}
        Let \(X\) be a scheme and \(\calF\) a coherent sheaf on \(X\).
        The sheaf \(\calF\) is called \emph{reflexive} if the natural map \(\calF \to \calF^{\vee\vee}\) is an isomorphism.
    \end{definition}

    \begin{proposition}\label{prop:reflexive_sheaf_determined_by_codimension_locus}
        Let \(X\) be a normal scheme and \(\calF\) a coherent sheaf on \(X\).
        If \(\calF\) is reflexive, then it is determined by its restriction to any open subset \(U \subseteq X\) whose complement has codimension at least \(2\), i.e., \(\calF \cong i_* (\calF|_U)\), where \(i: U \hookrightarrow X\) is the inclusion map.
        \Yang{To be checked.}
    \end{proposition}
    \begin{proof}
        \Yang{To be continued.}
    \end{proof}

    \begin{theorem}\label{thm:reflexive_sheaves_of_rank_1_and_Weil_divisors_class_group}
        Let \(X\) be a normal integral scheme.
        There is a one-to-one correspondence between the set of isomorphism classes of reflexive sheaves of rank \(1\) on \(X\) and the \Yang{Weil divisor class group \(\WDiv(X)\)} of \(X\).
        Under this correspondence, a Weil divisor \(D\) corresponds to the reflexive sheaf \(\calO_X(D)\).
        \Yang{To be checked.}
    \end{theorem}
    \begin{proof}
        \Yang{To be continued.}
    \end{proof}


\subsection{The first Chern class}

    \begin{definition}\label{def:first_chern_class_vector_bundles}
        Let \(X\) be a normal scheme and \(\calL\) a vector bundle on \(X\).
        The \emph{first Chern class} of \(\calL\), denoted by \(c_1(\calL)\), is a Weil divisor class defined as follows:
        
        \Yang{To be completed.}
    \end{definition}

    \begin{definition}\label{def:first_chern_class_coherent_sheaves}
        Let \(X\) be a normal scheme and \(\calF\) a coherent sheaf on \(X\).
        On \(X_{\text{reg}}\), the regular locus of \(X\), \(\calF|_{X_{\text{reg}}}\) admits a finite resolution by vector bundles
        \[ 0 \to \calE_n \to \calE_{n-1} \to \cdots \to \calE_0 \to \calF|_{X_{\text{reg}}} \to 0. \]
        The \emph{first Chern class} of \(\calF\), denoted by \(c_1(\calF)\), is defined to be
        \[ c_1(\calF) = \sum_{i=0}^n (-1)^i c_1(\calE_i). \]
        \Yang{To be revised.}
    \end{definition}

    \begin{proposition}\label{prop:first_chern_class_of_torsion_sheaves}
        Let \(X\) be a normal scheme and \(\calF\) a torsion sheaf on \(X\).
        Then 
        \[ c_1(\calF) = \sum_{Z} \length_{\calO_{X,Z}}(\calF_Z) \cdot Z, \]
        where the sum runs over all prime divisors \(Z\) of \(X\) and \(\calF_Z\) is the stalk of \(\calF\) at the generic point of \(Z\).
        \Yang{To be checked.}
    \end{proposition}
